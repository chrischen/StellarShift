<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Stellar Shift - Dual Zone</title>
    <script type="text/javascript" src="assets/joy.js"></script>
  </head>
    <body style="margin: 0; padding: 0;">
    <script type="text/javascript">

      var map = [
                12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,15,
                6,7,8,5,15,17,7,14,24,19,19,16,22,2,12,16,12,12,15,19,2,2,10,10,23,14,18,7,8,10,22,18,18,23,1,15,2,5,5,1,16,16,12,10,19,8,8,15,22,3,
                6,12,10,1,10,10,8,2,8,12,22,5,17,19,21,2,11,21,21,13,11,24,5,24,16,17,8,1,18,24,21,19,18,13,1,13,15,8,10,24,13,13,22,2,18,11,17,16,23,3,
                6,8,13,14,7,15,13,9,24,1,10,21,15,9,24,17,18,12,12,7,12,8,14,7,17,18,7,23,2,23,8,18,2,21,1,2,9,15,10,12,21,18,12,19,9,13,12,10,15,3,
                6,19,5,8,17,17,9,5,10,8,24,21,7,17,14,21,9,15,23,2,24,1,24,10,15,21,7,15,2,10,18,24,18,16,9,16,9,1,22,5,18,9,22,24,16,23,24,16,19,3,
                6,1,14,11,21,2,24,9,19,9,7,10,8,2,9,16,13,12,7,2,13,21,7,8,15,16,11,8,18,8,18,1,23,13,9,17,22,24,14,23,24,1,11,12,8,9,12,16,13,3,
                6,9,5,24,10,13,11,12,9,11,18,15,8,14,17,8,14,17,18,13,23,1,5,16,10,13,14,24,5,13,24,2,21,17,10,21,15,2,8,12,12,22,7,21,10,22,5,5,11,3,
                6,13,21,23,11,13,5,15,13,9,13,23,2,15,18,10,13,18,5,2,21,16,13,11,9,16,15,22,5,16,5,23,12,24,5,23,14,9,19,24,14,2,16,17,17,5,11,7,11,3,
                6,7,7,14,22,1,18,17,18,13,1,10,8,18,5,17,24,15,12,9,12,8,11,14,19,7,14,24,12,17,21,9,8,13,21,14,17,12,15,23,9,5,17,11,14,22,12,14,22,3,
                6,21,13,11,1,9,19,11,17,11,23,12,13,12,9,9,11,17,11,13,14,1,13,14,11,17,14,13,2,17,8,2,19,24,24,21,12,7,23,11,9,19,23,16,9,18,15,11,21,3,
                6,9,9,12,12,12,24,14,22,23,9,16,17,22,1,1,23,5,16,12,23,14,14,23,5,24,1,24,17,17,24,23,18,9,12,12,2,9,11,23,12,19,24,8,11,7,12,19,1,3,
                6,7,18,10,2,11,23,23,23,2,22,2,13,2,18,15,22,24,18,23,5,5,8,12,10,16,2,16,18,24,5,9,24,18,18,21,14,1,9,21,7,16,19,24,9,22,1,5,10,3,
                6,23,17,1,12,9,17,23,8,12,1,21,12,8,19,5,19,21,12,16,2,19,10,1,8,19,12,2,18,11,10,18,7,14,10,21,2,15,22,16,23,1,15,19,16,17,12,18,23,3,
                6,21,14,8,1,9,21,21,18,14,8,7,14,10,21,17,2,8,23,7,14,13,24,17,21,10,12,23,5,15,23,15,1,2,10,7,24,18,23,13,21,7,8,1,7,19,22,19,5,3,
                6,21,7,9,21,16,17,18,9,1,11,10,15,24,7,21,22,9,23,5,13,12,7,9,8,5,19,2,7,7,10,13,8,11,15,22,14,19,10,19,16,7,8,7,15,14,11,22,19,3,
                6,16,17,19,11,2,24,21,2,9,9,1,21,10,12,14,11,24,21,11,19,13,15,19,7,13,7,10,11,1,2,24,12,18,14,16,14,22,9,18,16,24,2,8,12,9,11,22,24,3,
                6,13,2,2,24,17,10,14,15,24,12,11,10,5,19,22,21,22,23,9,7,14,9,12,8,21,10,21,14,15,8,9,22,16,1,17,21,16,7,5,10,8,24,13,7,2,23,16,18,3,
                6,9,24,18,24,2,9,14,21,22,21,7,15,2,8,17,1,9,19,7,16,23,2,15,10,2,13,21,10,1,18,24,9,8,5,17,14,19,23,24,19,23,17,2,11,22,11,17,15,3,
                6,21,8,5,9,11,18,7,22,19,5,10,17,22,10,18,21,9,10,21,8,14,19,24,7,5,19,17,23,2,21,19,21,1,18,8,13,8,13,21,13,16,13,12,16,7,9,10,8,3,
                6,8,8,18,18,1,18,16,23,22,13,12,21,15,23,9,11,9,2,14,17,14,1,12,17,13,9,18,22,14,14,13,8,9,18,17,12,18,8,16,23,16,23,8,8,8,17,1,14,3,
                6,10,10,21,18,22,8,10,14,1,8,19,23,14,9,12,24,12,23,5,8,22,22,11,5,15,15,18,18,1,22,19,23,12,15,7,15,8,18,12,1,23,22,19,7,2,18,23,8,3,
                6,9,18,8,9,18,19,22,21,13,9,18,13,9,12,18,14,17,5,23,23,10,9,13,19,12,19,22,19,16,13,22,21,23,18,11,22,2,18,8,2,14,18,18,15,18,16,21,16,3,
                6,17,23,7,10,15,8,21,11,18,18,16,18,14,16,11,9,23,2,14,21,22,16,14,22,23,9,1,8,2,1,22,13,1,13,7,12,1,21,2,16,22,23,14,14,13,16,19,16,3,
                6,9,12,16,11,11,9,5,1,21,2,7,11,23,8,10,12,14,1,10,21,2,24,18,2,13,16,15,9,5,1,2,9,21,12,5,19,16,10,24,2,16,9,24,14,21,14,21,12,3,
                6,22,1,21,2,16,21,24,21,14,9,2,22,1,14,9,14,19,2,7,10,14,24,10,5,7,12,18,16,19,12,14,16,14,1,12,10,8,10,11,7,22,22,2,18,11,14,18,16,3,
                6,15,23,16,18,18,19,9,18,18,9,10,5,24,10,13,21,16,11,9,2,22,24,15,21,17,15,13,15,9,17,13,23,21,15,7,23,16,21,22,8,16,22,1,19,1,23,15,11,3,
                6,23,1,21,24,7,8,16,24,24,11,9,9,10,16,19,1,12,1,8,13,12,9,23,18,18,12,18,10,23,12,5,21,11,8,13,5,19,21,12,12,24,19,19,1,13,15,1,1,3,
                6,12,23,2,9,9,23,19,14,13,15,1,15,8,1,17,9,5,11,10,18,8,22,15,7,19,19,23,7,7,15,10,22,23,10,8,16,18,7,5,11,18,23,15,5,21,5,5,1,3,
                6,2,15,19,8,11,22,12,5,19,22,15,21,12,9,10,5,2,10,12,7,8,21,24,13,18,13,2,14,9,14,18,16,8,8,5,19,17,13,24,9,24,2,22,17,18,7,7,1,3,
                6,16,22,19,21,2,5,16,12,11,9,8,2,10,15,8,19,18,11,19,7,14,17,9,16,15,10,5,9,12,12,15,10,24,19,5,7,10,19,2,17,21,2,17,13,17,24,13,5,3,
                6,16,17,1,11,19,21,21,2,16,21,2,12,17,10,11,14,14,8,22,23,23,11,13,9,23,8,13,11,14,7,24,14,19,16,2,12,13,12,9,14,8,10,16,8,7,16,9,17,3,
                6,7,1,24,19,5,1,14,9,15,1,24,1,19,1,5,24,23,22,11,11,23,2,7,11,21,13,22,11,13,9,16,22,7,14,21,17,15,12,8,23,13,17,5,1,1,18,11,8,3,
                6,16,15,12,19,23,19,22,15,21,7,2,21,9,22,12,7,18,21,19,19,11,2,12,13,1,14,16,9,17,8,11,12,16,13,1,21,16,1,14,14,12,18,24,7,19,21,14,5,3,
                6,22,24,10,11,5,10,14,18,21,12,11,11,7,13,23,24,24,7,12,10,14,12,1,15,15,19,17,14,1,17,22,17,22,18,1,13,17,10,22,13,8,11,12,9,5,2,23,17,3,
                6,24,16,10,15,8,16,14,13,11,7,2,2,16,24,12,12,10,23,8,5,2,14,17,21,21,17,15,1,12,16,16,16,18,19,21,14,10,16,9,15,11,23,12,21,18,2,1,7,3,
                6,18,12,7,21,11,7,5,14,7,14,8,18,7,16,15,2,22,16,12,16,18,23,10,14,15,17,18,12,10,8,1,1,12,13,8,10,12,10,17,7,23,15,2,11,22,23,16,22,3,
                6,7,18,22,14,2,14,21,23,17,17,8,10,5,13,12,1,13,1,12,21,11,23,24,21,12,15,19,24,2,18,24,13,8,12,15,5,12,2,11,1,8,14,7,23,15,1,13,21,3,
                6,11,19,12,18,15,16,2,22,13,9,23,7,18,22,5,8,18,9,22,22,19,22,15,21,11,12,10,19,24,15,16,16,18,13,13,13,13,18,22,1,22,15,19,21,11,9,16,24,3,
                6,12,14,21,16,7,5,22,13,24,23,14,9,13,1,22,15,5,7,2,12,2,1,24,23,8,21,5,24,9,8,2,19,9,24,12,1,16,24,21,13,12,8,21,19,23,12,7,11,3,
                6,12,19,12,24,8,1,2,19,23,11,11,8,7,2,2,22,1,16,15,19,15,2,5,12,15,16,2,7,5,15,11,14,11,23,11,22,23,5,13,1,15,2,22,10,9,19,1,7,3,
                6,7,7,15,24,17,14,22,13,12,24,14,14,18,16,11,18,7,9,10,17,22,21,17,1,11,1,24,10,14,5,22,12,14,11,5,12,24,13,16,17,11,15,13,21,19,16,8,15,3,
                6,21,12,17,7,14,21,18,2,7,2,13,16,22,11,11,14,7,12,12,22,14,8,19,13,1,14,9,23,16,2,5,11,1,10,13,8,16,2,7,24,12,12,18,8,10,24,14,8,3,
                6,18,19,18,14,7,14,13,11,14,11,9,16,15,22,9,21,24,19,7,7,12,12,5,2,22,17,9,8,18,9,15,21,21,1,13,18,5,5,10,16,19,24,9,12,24,8,1,19,3,
                6,15,19,23,23,24,17,13,8,13,9,19,9,15,15,15,7,24,23,17,23,19,9,1,13,8,18,12,8,2,23,17,13,15,14,8,2,10,11,16,7,2,23,2,15,14,18,22,22,3,
                6,15,24,16,18,2,9,16,19,10,5,17,12,19,7,11,19,18,2,12,7,17,2,1,24,11,19,18,24,23,14,5,16,18,14,2,12,7,18,7,21,12,12,10,8,24,12,12,9,3,
                6,12,5,24,21,12,23,2,7,15,1,14,1,15,2,21,24,15,5,5,18,17,1,2,16,17,11,16,19,8,7,5,23,12,13,8,22,14,17,11,11,5,13,23,12,9,13,12,16,3,
                6,18,17,24,13,12,2,14,11,1,23,15,23,18,10,11,15,12,22,10,10,22,16,19,15,13,14,13,19,22,7,21,24,7,18,12,8,24,24,21,22,21,22,8,19,21,16,18,5,3,
                6,21,17,10,12,22,8,22,17,19,9,11,23,21,19,13,11,11,24,12,18,22,15,2,18,1,17,10,23,1,8,15,24,7,16,18,2,18,19,19,19,24,17,10,10,24,15,22,7,3,
                6,11,15,13,21,13,19,24,9,9,18,11,22,8,17,5,12,5,10,7,14,5,9,19,13,7,9,14,12,2,1,21,18,23,15,17,18,14,7,21,7,9,10,7,10,7,8,18,16,3,
                14,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,8];
      var player;
      var REAVER_ACCELERATION = 0.1;

      var engine = new Joy.Engine({
        debug: true,
        width: document.body.clientWidth,
        height: document.body.clientHeight
      });

      engine.createScene(function (scene) {
        // Define tileset dimensions

        var tileset = new Joy.Tileset({
          src: "assets/bg-Tileset.png",
          width: 86,
          height: 86
        });

        var tilemap = new Joy.Tilemap({
          tileset: tileset,
          lines: 50,
          columns: 50,
          data: map
        });
        
        scene.addChild(tilemap);

        var text = new Joy.Text({
            x: 150,
            y: 12,
            text: "",
            align: "center",
            font: "10pt Verdana",
            baseline: Joy.Text.BASELINE.MIDDLE
        });

        //scene.addChild(text);

        Joy.Behaviour.define('ZapposBehavior', {
            INIT: function() {
                this.maxVelocity = new Joy.Vector2d(3, 3);
                this.friction = new Joy.Vector2d(0.001, 0.001);
                this.grounded = false;
                this.pivot.x = this.width / 2;
                this.pivot.y = this.height / 2;
                this.rotation = 0;
            },

            UPDATE: function() {

            },

            KEY_UP: function(evt) {
                if (evt.keyCode == Joy.Keyboard.UP ||
                    evt.keyCode == Joy.Keyboard.DOWN) {
                    this.acceleration.x = 0
                    this.acceleration.y = 0;
                }

                if (evt.keyCode === Joy.Keyboard.LEFT ||
                    evt.keyCode === Joy.Keyboard.RIGHT) {
                    this.acceleration.x = 0
                    this.acceleration.x = 0;
                }
            },

            KEY_DOWN: function(evt) {

            },

            KEY_PRESS: function(evt) {
                if (evt.keyCode == Joy.Keyboard.UP) {
                    this.acceleration.y = -REAVER_ACCELERATION * Math.cos(this.rotation * Math.PI / 180);
                    this.acceleration.x = REAVER_ACCELERATION * Math.sin(this.rotation * Math.PI / 180);
                } else if (evt.keyCode == Joy.Keyboard.DOWN) {
                    this.acceleration.y = REAVER_ACCELERATION * Math.cos(this.rotation * Math.PI / 180);
                    this.acceleration.x = -REAVER_ACCELERATION * Math.sin(this.rotation * Math.PI / 180);
                }

                if (evt.keyCode === Joy.Keyboard.LEFT) {
                    if (this.rotation == 0) 
                    {
                        this.rotation = 359;
                    } else {
                        this.rotation--;
                    }
                } else if (evt.keyCode === Joy.Keyboard.RIGHT) {
                    this.rotation++;
                }

                this.rotation %= 360;
            },

            COLLISION: function(other) {

            },

            COLLISION_EXIT: function(other) {

            }
        });

        var zappos = new Joy.Sprite({
    		x: engine.width / 2 - 24,
    		y: engine.height / 2 - 24,
    		width: 48,
    		height: 48,
    		animations: {
    			"idle": [0],
    		},
    		src: "assets/zappos.png",
    	}).behave('Movimentation, ZapposBehavior');

    	scene.addChild(zappos);

        scene.viewport.setup({
            follow: zappos,
            width: engine.width,
            height: engine.height
        })
    });
    </script>

  </body>
</html>